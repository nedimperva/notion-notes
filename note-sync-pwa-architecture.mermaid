flowchart TD
    subgraph ClientSide["Client-Side (PWA)"]
        UI["User Interface"]
        SW["Service Worker"]
        IDB["IndexedDB Storage"]
        SyncManager["Background Sync"]
    end
    
    subgraph ServerSide["Server-Side"]
        API["API Layer"]
        NotionInt["Notion Integration"]
        Queue["Sync Queue"]
        AuthService["Authentication Service"]
    end
    
    subgraph NotionAPI["Notion"]
        Templates["Notion Templates"]
        Database["Notion Database"]
    end
    
    UI --> SW
    UI --> IDB
    SW --> SyncManager
    IDB --> SyncManager
    SyncManager --> API
    API --> NotionInt
    NotionInt --> Queue
    Queue --> NotionAPI
    AuthService --> NotionInt
    
    classDef primary fill:#d1eaff,stroke:#0071e3,stroke-width:2px;
    classDef secondary fill:#fcf0e1,stroke:#ff9500,stroke-width:2px;
    classDef tertiary fill:#e6f7e1,stroke:#34c759,stroke-width:2px;
    
    class ClientSide primary;
    class ServerSide secondary;
    class NotionAPI tertiary;
